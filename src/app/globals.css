@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --font-inter: 'Inter', ui-sans-serif, system-ui, sans-serif;
}

html {
  scroll-behavior: smooth;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
}

/* Custom scrollbar */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(99, 102, 241, 0.25); border-radius: 999px; }
::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.5); }

/* ---- Callouts ---- */
.callout {
  @apply my-5 rounded-xl px-5 py-4 text-sm leading-relaxed border-l-4;
}
.callout-note {
  @apply bg-indigo-50 border-indigo-400 text-indigo-900 dark:bg-indigo-950/40 dark:border-indigo-500 dark:text-indigo-200;
}
.callout-tip {
  @apply bg-emerald-50 border-emerald-400 text-emerald-900 dark:bg-emerald-950/40 dark:border-emerald-500 dark:text-emerald-200;
}
.callout-important {
  @apply bg-violet-50 border-violet-400 text-violet-900 dark:bg-violet-950/40 dark:border-violet-500 dark:text-violet-200;
}
.callout-warning {
  @apply bg-amber-50 border-amber-400 text-amber-900 dark:bg-amber-950/40 dark:border-amber-500 dark:text-amber-200;
}

/* ---- Tables ---- */
.table-wrapper {
  @apply w-full overflow-x-auto my-6 rounded-xl border border-slate-200 dark:border-slate-700;
}
.table-wrapper table {
  @apply w-full text-sm border-collapse;
}
.table-wrapper table thead th {
  @apply bg-slate-50 dark:bg-slate-800/80 text-slate-700 dark:text-slate-300
         font-semibold px-4 py-3 text-left whitespace-nowrap
         border-b border-slate-200 dark:border-slate-700;
}
.table-wrapper table tbody td {
  @apply px-4 py-3 border-b border-slate-100 dark:border-slate-800
         text-slate-700 dark:text-slate-300 align-top;
}
.table-wrapper table tbody tr:last-child td { @apply border-b-0; }
.table-wrapper table tbody tr:nth-child(even) td {
  @apply bg-slate-50/60 dark:bg-slate-800/20;
}

/* ---- Prose overrides — optimised for long-form reading ---- */
.doc-content h1 { @apply text-[28px] font-bold mt-12 mb-5 text-slate-900 dark:text-white tracking-tight leading-tight; }
.doc-content h2 {
  @apply text-[22px] font-bold mt-14 mb-5 pb-3
         border-b border-slate-200 dark:border-slate-700
         text-slate-800 dark:text-slate-100 tracking-tight leading-snug;
}
.doc-content h3 { @apply text-[18px] font-semibold mt-10 mb-3 text-slate-800 dark:text-slate-100 leading-snug; }
.doc-content h4 { @apply text-[15px] font-semibold mt-7 mb-2 text-slate-700 dark:text-slate-200; }
.doc-content p  {
  @apply text-slate-700 dark:text-slate-300 my-4;
  font-size: 15.5px;
  line-height: 1.8;
  letter-spacing: -0.003em;
}

.doc-content ul { @apply my-5 pl-6 space-y-2; }
.doc-content ul li { @apply text-slate-700 dark:text-slate-300 list-disc; font-size: 15.5px; line-height: 1.75; }
.doc-content ol { @apply my-5 pl-6 space-y-2; }
.doc-content ol li { @apply text-slate-700 dark:text-slate-300 list-decimal; font-size: 15.5px; line-height: 1.75; }

.doc-content a { @apply text-indigo-600 dark:text-indigo-400 underline underline-offset-2 hover:text-indigo-800 dark:hover:text-indigo-300; }

.doc-content blockquote {
  @apply my-6 pl-5 border-l-4 border-indigo-400 italic
         text-slate-600 dark:text-slate-400 bg-indigo-50/50 dark:bg-indigo-950/20
         rounded-r-lg py-3 pr-4;
  font-size: 15px;
}

.doc-content pre {
  @apply bg-slate-900 dark:bg-slate-950 text-slate-100 rounded-xl p-5 overflow-x-auto
         text-sm font-mono my-5 border border-slate-700 leading-relaxed;
}

.doc-content code:not(pre code) {
  @apply bg-indigo-50 dark:bg-indigo-950/50 text-indigo-700 dark:text-indigo-300
         rounded px-1.5 py-0.5 text-sm font-mono;
}

.doc-content strong { @apply font-semibold text-slate-900 dark:text-white; }
.doc-content em { @apply italic text-slate-600 dark:text-slate-400; }

/* ── Scroll offset for sticky header ─────────────────────────────────── */
.doc-content [id] { scroll-margin-top: 80px; }

/* ── Anchor links on headings ─────────────────────────────────────────── */
.doc-content h1,
.doc-content h2,
.doc-content h3,
.doc-content h4 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}
.anchor-link {
  opacity: 0;
  color: #94a3b8;
  text-decoration: none !important;
  flex-shrink: 0;
  transition: opacity 0.15s, color 0.15s;
  line-height: 1;
}
.doc-content h1:hover .anchor-link,
.doc-content h2:hover .anchor-link,
.doc-content h3:hover .anchor-link,
.doc-content h4:hover .anchor-link {
  opacity: 1;
}
.anchor-link:hover { color: #6366f1; }

/* ── Copy button on code blocks ───────────────────────────────────────── */
.copy-btn {
  position: absolute;
  top: 0.6rem;
  right: 0.6rem;
  display: inline-flex;
  align-items: center;
  gap: 0.3rem;
  padding: 0.25rem 0.6rem;
  font-size: 11px;
  font-weight: 500;
  border-radius: 6px;
  border: 1px solid rgba(148, 163, 184, 0.25);
  background: rgba(30, 41, 59, 0.85);
  color: #94a3b8;
  cursor: pointer;
  transition: all 0.15s;
  backdrop-filter: blur(4px);
  line-height: 1;
}
.copy-btn:hover { color: #e2e8f0; border-color: rgba(148, 163, 184, 0.5); }
.copy-btn.copied { color: #34d399; border-color: rgba(52, 211, 153, 0.4); }

/* ── Mermaid diagrams ─────────────────────────────────────────────────── */
.mermaid-wrapper {
  @apply my-6 p-4 rounded-xl border border-slate-200 dark:border-slate-700
         bg-white dark:bg-slate-900 overflow-x-auto flex justify-center;
}
.mermaid-wrapper svg {
  max-width: 100%;
  height: auto;
}

/* ── Glossary cards ───────────────────────────────────────────────────── */
.glossary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
  gap: 12px;
  margin: 28px 0;
}

.glossary-card {
  position: relative;
  background: white;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 14px 16px 16px;
  transition: border-color 0.15s ease, box-shadow 0.15s ease, transform 0.15s ease;
  scroll-margin-top: 90px;
}
.dark .glossary-card {
  background: rgb(15 23 42 / 0.7);
  border-color: rgb(51 65 85 / 0.8);
}
.glossary-card:hover {
  border-color: #a5b4fc;
  box-shadow: 0 4px 20px rgba(99, 102, 241, 0.10);
  transform: translateY(-1px);
}
.dark .glossary-card:hover {
  border-color: #6366f1;
  box-shadow: 0 4px 20px rgba(99, 102, 241, 0.15);
}

.glossary-card-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
  min-height: 22px;
}

.glossary-badge {
  display: inline-flex;
  align-items: center;
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid;
}
.glossary-badge-protocol  { background:#ede9fe; color:#6d28d9; border-color:#c4b5fd; }
.glossary-badge-network   { background:#e0f2fe; color:#0369a1; border-color:#bae6fd; }
.glossary-badge-security  { background:#fef3c7; color:#b45309; border-color:#fde68a; }
.glossary-badge-monitoring{ background:#d1fae5; color:#065f46; border-color:#a7f3d0; }
.glossary-badge-sre       { background:#f0fdf4; color:#15803d; border-color:#bbf7d0; }
.glossary-badge-payments  { background:#fdf4ff; color:#7e22ce; border-color:#e9d5ff; }
.glossary-badge-incident  { background:#fff1f2; color:#be123c; border-color:#fecdd3; }
.glossary-badge-default   { background:#f1f5f9; color:#475569; border-color:#e2e8f0; }
.dark .glossary-badge-protocol  { background:#4c1d95/30; background-color:rgba(76,29,149,0.25); color:#c4b5fd; border-color:rgba(167,139,250,0.3); }
.dark .glossary-badge-network   { background-color:rgba(3,105,161,0.2); color:#7dd3fc; border-color:rgba(125,211,252,0.3); }
.dark .glossary-badge-security  { background-color:rgba(180,83,9,0.2); color:#fcd34d; border-color:rgba(252,211,77,0.3); }
.dark .glossary-badge-monitoring{ background-color:rgba(6,95,70,0.2); color:#6ee7b7; border-color:rgba(110,231,183,0.3); }
.dark .glossary-badge-sre       { background-color:rgba(21,128,61,0.2); color:#86efac; border-color:rgba(134,239,172,0.3); }
.dark .glossary-badge-payments  { background-color:rgba(126,34,206,0.2); color:#d8b4fe; border-color:rgba(216,180,254,0.3); }
.dark .glossary-badge-incident  { background-color:rgba(190,18,60,0.2); color:#fda4af; border-color:rgba(253,164,175,0.3); }
.dark .glossary-badge-default   { background-color:rgba(71,85,105,0.2); color:#94a3b8; border-color:rgba(148,163,184,0.2); }

.glossary-copy-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border-radius: 6px;
  color: #94a3b8;
  cursor: pointer;
  transition: color 0.15s, background 0.15s;
  flex-shrink: 0;
}
.glossary-copy-btn:hover { color: #6366f1; background: #eef2ff; }
.dark .glossary-copy-btn:hover { color: #a5b4fc; background: rgba(99,102,241,0.15); }

.glossary-card-term {
  font-size: 14px;
  font-weight: 700;
  color: #1e293b;
  line-height: 1.4;
  margin-bottom: 6px;
}
.dark .glossary-card-term { color: #f1f5f9; }

.glossary-card-def {
  font-size: 13px;
  color: #475569;
  line-height: 1.65;
}
.dark .glossary-card-def { color: #94a3b8; }

.glossary-card-context {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid #f1f5f9;
  font-size: 11px;
  color: #94a3b8;
  font-style: italic;
}
.dark .glossary-card-context { border-color: rgba(51,65,85,0.5); color: #64748b; }

/* ── Glossary A-Z nav ─────────────────────────────────────────────────── */
.glossary-az-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 4px;
  margin-bottom: 20px;
  padding: 12px 16px;
  background: #f8fafc;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
}
.dark .glossary-az-nav {
  background: rgba(15,23,42,0.5);
  border-color: rgba(51,65,85,0.6);
}
.glossary-az-btn {
  width: 28px;
  height: 28px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  border-radius: 6px;
  color: #6366f1;
  cursor: pointer;
  transition: background 0.12s, color 0.12s;
  text-decoration: none;
}
.glossary-az-btn:hover { background: #eef2ff; }
.dark .glossary-az-btn { color: #818cf8; }
.dark .glossary-az-btn:hover { background: rgba(99,102,241,0.15); }
.glossary-az-btn.inactive { color: #cbd5e1; cursor: default; }
.dark .glossary-az-btn.inactive { color: #334155; }

/* ── Reading mode ─────────────────────────────────────────────────────── */
body.reading-mode .doc-content {
  max-width: 680px;
  margin-left: auto;
  margin-right: auto;
  font-size: 16px;
  line-height: 1.85;
}
